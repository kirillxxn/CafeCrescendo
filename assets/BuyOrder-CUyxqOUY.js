const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UserInfo-B9V_nb9Q.js","assets/index-B_YZ1bcj.js","assets/index-BxqDl4aX.css","assets/ModalProfile.module-BI4GlYxw.js","assets/ModalProfile-DwgWg1iR.css"])))=>i.map(i=>d[i]);
import{u as b,c as x,j as e,r as t,P as p,_ as y,V as j}from"./index-B_YZ1bcj.js";import{F as h,e as N,b as f,c as a,E as o}from"./formik.esm-4u843pHc.js";import{s}from"./ModalBasket-Cs18ukXe.js";import"./closebutton-BzUVgdKv.js";const v=t.lazy(()=>y(()=>import("./UserInfo-B9V_nb9Q.js"),__vite__mapDeps([0,1,2,3,4]))),g=({closeModal:d,total:l,handleBuyButton:c})=>{const{user:n,isLoggedIn:r}=b(),{resetBasket:i}=x(),m=()=>{d(),j.success(r?"Спасибо за покупку":"Заказ принят в обработку"),i()};return e.jsxs("div",{className:s["buy-order"],children:[r&&e.jsx(t.Suspense,{fallback:e.jsx(p,{component:"Загрузка пользователя"}),children:e.jsx(v,{user:n})}),e.jsx(h,{initialValues:{phone:"",...!r&&{name:"",email:""}},validationSchema:N,onSubmit:m,children:({dirty:u,isValid:_})=>e.jsxs(f,{className:s["buy-order__form"],children:[!r&&e.jsxs(e.Fragment,{children:[e.jsx(a,{className:s["buy-order__field"],type:"text",name:"name",placeholder:"Ваше имя",required:!0}),e.jsx(o,{name:"name",component:"div",className:s["buy-order__error"]}),e.jsx(a,{className:s["buy-order__field"],type:"email",name:"email",placeholder:"Ваш email",required:!0}),e.jsx(o,{name:"email",component:"div",className:s["buy-order__error"]})]}),e.jsx(a,{className:s["buy-order__field"],type:"tel",name:"phone",placeholder:"+7 (XXX) XXX-XX-XX",required:!0}),e.jsx(o,{name:"phone",component:"div",className:s["buy-order__error"]}),e.jsxs("div",{className:s["buy-order__actions"],children:[e.jsx("button",{onClick:c,className:s["buy-order__back-btn"],"aria-label":"Вернуться",children:e.jsx("span",{className:s["buy-order__back-text"],children:"Вернуться"})}),e.jsx("button",{type:"submit",className:s["buy-order__submit-btn"],"aria-label":"Оформить заказ",disabled:!_||!u,children:e.jsx("span",{className:s["buy-order__submit-text"],children:r?"Оформить":"Отправить заказ"})})]})]})}),e.jsxs("div",{className:s["buy-order__delivery"],children:[e.jsx("iframe",{className:s["buy-order__map"],src:"https://yandex.ru/map-widget/v1/?um=constructor%3A0010577ee842b44cc46545929d9f0a2dad5653bc8c2017548508772a7cfbc353&source=constructor"}),e.jsxs("span",{className:s["buy-order__address"],children:["Самовывоз из магазина: ",e.jsx("br",{})," Москва, улица Арбат, 11"]})]}),e.jsxs("span",{className:s["buy-order__total"],children:["Итого:",l,"₽"]})]})};export{g as default};
